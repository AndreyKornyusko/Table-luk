[{"H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\index.tsx":"1","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\reportWebVitals.ts":"2","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\App.tsx":"3","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\Componets\\SortableTable\\TableContainer\\TableContainer.tsx":"4","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\Componets\\SortableTable\\Modal\\Modal.tsx":"5","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\Componets\\SortableTable\\Table\\Table.tsx":"6","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\servises\\api.tsx":"7","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\Componets\\SortableTable\\BtnDropdown\\BtnDropdown.tsx":"8"},{"size":503,"mtime":1609418871326,"results":"9","hashOfConfig":"10"},{"size":425,"mtime":499162500000,"results":"11","hashOfConfig":"10"},{"size":270,"mtime":1609581207424,"results":"12","hashOfConfig":"10"},{"size":6333,"mtime":1609708449027,"results":"13","hashOfConfig":"10"},{"size":1116,"mtime":1609708482075,"results":"14","hashOfConfig":"10"},{"size":7780,"mtime":1609708046678,"results":"15","hashOfConfig":"10"},{"size":439,"mtime":1609695222749,"results":"16","hashOfConfig":"10"},{"size":1599,"mtime":1609708187271,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"1602r8e",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"20"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"20"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\index.tsx",[],["37","38"],"H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\reportWebVitals.ts",[],"H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\App.tsx",[],"H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\Componets\\SortableTable\\TableContainer\\TableContainer.tsx",["39"],"import React, { useState, useEffect } from 'react';\r\nimport './TableContainer.css';\r\nimport Table from '../Table/Table';\r\nimport Modal from '../Modal/Modal';\r\nimport * as API from '../../../servises/api';\r\n\r\n// const tableItems = [\r\n//   {\r\n//     id: 101, status: \"Active\", state: \"ex president\", city: \"New York\", collagename: \"Donald Trump\", firstname: \"Donald\", lastname: \"Trump\", phone: \"455-44-41\", collageemail: \"trump@mail.com\", trainingComplited: 1 / 6,\r\n//     complitedTours: 8, upcomingTours: 10, canceledTours: 10, resheduledTours: 10, joindate: \"Wed, 02 May 2013 08:00:00 GMT\"\r\n//   },\r\n//   {\r\n//     id: 102, status: \"Pending\", state: \"great man\", city: \"Chicago\", collagename: \"Ilon Mask\", firstname: \"Ilon\", lastname: \"Mask\", phone: \"455-44-42\", collageemail: \"Mask@mail.com\", trainingComplited: 1 / 2,\r\n//     complitedTours: 12, upcomingTours: 7, canceledTours: 5, resheduledTours: 6, joindate: \"Wed, 27 May 2014 08:00:00 GMT\"\r\n//   },\r\n//   {\r\n//     id: 103, status: \"Blocked\", state: \"businessman\", city: \"Vegas\", collagename: \"Bill Gates\", firstname: \"Bill\", lastname: \"Gates\", phone: \"455-44-43\", collageemail: \"Gates@mail.com\", trainingComplited: 1 / 8,\r\n//     complitedTours: 11, upcomingTours: 14, canceledTours: 1, resheduledTours: 2, joindate: \"Wed, 12 May 2011 08:00:00 GMT\"\r\n//   },\r\n//   {\r\n//     id: 104, status: \"Blocked\", state: \"actor\", city: \"Hollywood\", collagename: \"Sylvester Stallone\", firstname: \"Sylvester\", lastname: \"Stallone\", phone: \"455-44-44\", collageemail: \"Stallone@mail.com\", trainingComplited: 1 / 1,\r\n//     complitedTours: 3, upcomingTours: 12, canceledTours: 12, resheduledTours: 12, joindate: \"Wed, 25 May 2013 08:00:00 GMT\"\r\n//   },\r\n// ]\r\n\r\nconst intialItems = [];\r\n\r\nconst useSortableData = (items, config = null) => {\r\n  const [sortConfig, setSortConfig] = React.useState(config);\r\n\r\n  const sortedItems = React.useMemo(() => {\r\n    let sortableItems = [...items];\r\n    if (sortConfig !== null) {\r\n\r\n      if (sortConfig.key === \"joindate\") {\r\n        sortableItems.sort((a, b) => {\r\n          const nameA = (new Date(a[sortConfig.key])).getTime();\r\n          const nameB = (new Date(b[sortConfig.key])).getTime();\r\n          if (nameA < nameB) {\r\n            return sortConfig.direction === \"ascending\" ? -1 : 1;\r\n          }\r\n          if (nameA > nameB) {\r\n            return sortConfig.direction === \"ascending\" ? 1 : -1;\r\n          }\r\n          return 0;\r\n        });\r\n        return sortableItems;\r\n      }\r\n      sortableItems.sort((a, b) => {\r\n        if (a[sortConfig.key] < b[sortConfig.key]) {\r\n          return sortConfig.direction === \"ascending\" ? -1 : 1;\r\n        }\r\n        if (a[sortConfig.key] > b[sortConfig.key]) {\r\n          return sortConfig.direction === \"ascending\" ? 1 : -1;\r\n        }\r\n        return 0;\r\n      });\r\n    }\r\n    return sortableItems;\r\n  }, [items, sortConfig]);\r\n\r\n  const requestSort = (key) => {\r\n    let direction = \"ascending\";\r\n    if (\r\n      sortConfig &&\r\n      sortConfig.key === key &&\r\n      sortConfig.direction === \"ascending\"\r\n    ) {\r\n      direction = \"descending\";\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n  return { items: sortedItems, requestSort, sortConfig };\r\n};\r\n\r\nexport default function TableContainer() {\r\n  const [stateItems, setState] = useState(intialItems);\r\n  const [isDeleteBtnModalOpen, setIsOpen] = useState(false);\r\n  const [selectedActionData, setSelectedActionData] = useState({});\r\n  const { items, requestSort } = useSortableData(stateItems);\r\n\r\n  useEffect(() => {\r\n    getData()\r\n  }, []);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    if (selectedActionData.action === \"Delete\") {\r\n      openDeleteActionModal();\r\n    }\r\n\r\n    stateItems.forEach(item => {\r\n      if (item.id === selectedActionData.id && selectedActionData.action !== \"Delete\") {\r\n        if (selectedActionData.action === \"Activate\") {\r\n          changeItem(item, \"Active\")\r\n        }\r\n        if (selectedActionData.action === \"Block\") {\r\n          changeItem(item, \"Blocked\")\r\n        }\r\n      }\r\n    });\r\n  }, [selectedActionData]);\r\n\r\n  const getData = () => {\r\n    API.getAllItems().then(items => {\r\n      const indexedStateItems = items.map((item, index) => {\r\n        item.rowindex = Number(index + 1);\r\n        return item\r\n      });\r\n      setState(indexedStateItems);\r\n    });\r\n  }\r\n\r\n  const changeItem = (item, status) => {\r\n    const editedItem = {\r\n      id: item.id,\r\n      status: status,\r\n      state: item.state,\r\n      city: item.city,\r\n      collagename: item.collagename,\r\n      firstname: item.firstname,\r\n      lastname: item.lastname,\r\n      phone: item.phone,\r\n      collageemail: item.collageemail,\r\n      trainingComplited: item.trainingComplited,\r\n      complitedTours: item.complitedTours,\r\n      upcomingTours: item.upcomingTours,\r\n      canceledTours: item.canceledTours,\r\n      resheduledTours: item.resheduledTours,\r\n      joindate: item.joindate\r\n    }\r\n\r\n    API.changeItem(editedItem.id, editedItem).then(response => {\r\n      if (response.status === 200) {\r\n        alert(\"status changed\");\r\n        getData();\r\n      };\r\n      if (response.status !== 200) {\r\n        alert(\"status not changed\")\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleChooseActionBtnClick = (val, id) => {\r\n    const actionData = { id, action: val };\r\n    setSelectedActionData(actionData)\r\n  }\r\n\r\n  const openDeleteActionModal = () => {\r\n    setIsOpen(true)\r\n  }\r\n\r\n  const closeDeleteActionModal = () => {\r\n    setIsOpen(false)\r\n  }\r\n\r\n  const handleClickDeleteInActionModal = () => {\r\n    const itemId = selectedActionData.id;\r\n    API.deleteItem(itemId).then(response => {\r\n      if (response.status === 200) {\r\n        alert(\"item deleted successfully\");\r\n        const updatedItems = stateItems.filter(item => item.id !== selectedActionData.id);\r\n        setState(updatedItems);\r\n        closeDeleteActionModal()\r\n      }\r\n      if (response.status !== 200) {\r\n        alert(\"something went wrong!\");\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Table\r\n        items={items}\r\n        requestSort={(e) => requestSort(e.target.dataset['id'])}\r\n        handleChooseActionBtnClick={handleChooseActionBtnClick}\r\n      />\r\n      {isDeleteBtnModalOpen &&\r\n        <Modal\r\n          onClose={closeDeleteActionModal}\r\n          onDelete={handleClickDeleteInActionModal}\r\n        />}\r\n\r\n    </div>\r\n  )\r\n}\r\n","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\Componets\\SortableTable\\Modal\\Modal.tsx",["40"],"import React, { useEffect, useRef } from \"react\";\r\nimport './Modal.css';\r\n\r\nconst Modal = ({ onClose, onDelete }) => {\r\n  const node = useRef();\r\n\r\n  const handleBackdropClick = e => {\r\n    // console.log(\"node.current\", node.current)\r\n    if (node.current.contains(e.target)) return;\r\n    onClose();\r\n  };\r\n\r\n  const handleKeyPress = e => {\r\n    if (e.code !== 'Escape') return;\r\n    onClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", handleKeyPress);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleKeyPress);\r\n    };\r\n  }, []);\r\n  // console.log(\"node\", node)\r\n  return (\r\n\r\n    <div\r\n      className=\"modalbackdrop\"\r\n      ref={node}\r\n      onClick={handleBackdropClick}\r\n    >\r\n      <div className=\"modalWrap\">\r\n        <h3>Do you confirm row deletion?</h3>\r\n        <div className=\"modalWrap__btn-wrap\">\r\n          <button className=\"modalWrap__btn-close\" onClick={onClose}>Cancel</button>\r\n          <button className=\"modalWrap__btn-del\" onClick={onDelete}>Delete</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\Componets\\SortableTable\\Table\\Table.tsx",[],"H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\servises\\api.tsx",[],"H:\\PROGRAMMING\\WORK\\WTT Solution\\Table-luk\\src\\Componets\\SortableTable\\BtnDropdown\\BtnDropdown.tsx",[],{"ruleId":"41","replacedBy":"42"},{"ruleId":"43","replacedBy":"44"},{"ruleId":"45","severity":1,"message":"46","line":103,"column":6,"nodeType":"47","endLine":103,"endColumn":26,"suggestions":"48"},{"ruleId":"45","severity":1,"message":"49","line":23,"column":6,"nodeType":"47","endLine":23,"endColumn":8,"suggestions":"50"},"no-native-reassign",["51"],"no-negated-in-lhs",["52"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'changeItem' and 'stateItems'. Either include them or remove the dependency array.","ArrayExpression",["53"],"React Hook useEffect has a missing dependency: 'handleKeyPress'. Either include it or remove the dependency array.",["54"],"no-global-assign","no-unsafe-negation",{"desc":"55","fix":"56"},{"desc":"57","fix":"58"},"Update the dependencies array to be: [changeItem, selectedActionData, stateItems]",{"range":"59","text":"60"},"Update the dependencies array to be: [handleKeyPress]",{"range":"61","text":"62"},[4026,4046],"[changeItem, selectedActionData, stateItems]",[582,584],"[handleKeyPress]"]